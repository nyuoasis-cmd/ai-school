# 🧮 모의 창업 쇼핑몰 — 시뮬레이션 & AI 로직

## 1. 가격-수요 시뮬레이션 모델

### 핵심 공식

```javascript
// 실판매가 계산
실판매가 = Math.round(판매가 × (1 - 할인율/100))

// 수요 시뮬레이션
가격비율 = 기본가 / 실판매가
할인부스트 = 할인율 > 0 ? 1 + (할인율/100) × 0.8 : 1
예상판매 = Math.round(기본판매 × (가격비율)^1.5 × 할인부스트)

// 수익 계산
매출 = 실판매가 × 예상판매
이익 = (실판매가 - 원가) × 예상판매
이익률 = (이익 / 매출) × 100
```

### 모델 설명

| 요소 | 공식 | 효과 |
|------|------|------|
| 가격 탄력성 | `(기본가/실판매가)^1.5` | 가격↓ → 판매량↑ (1.5승 비선형) |
| 할인 부스트 | `1 + 할인율×0.8` | 할인 표시 자체가 추가 구매 유도 |
| 복합 효과 | 가격↓ + 할인↑ → 판매량 급증 | 하지만 이익률 급감 |

### 시뮬레이션 예시

**오버핏 맨투맨 (원가 12,000 / 기본가 25,000 / 기본 120개)**

| 판매가 | 할인 | 실판매가 | 예상판매 | 월매출 | 월이익 | 이익률 |
|--------|------|---------|---------|--------|--------|--------|
| 25,000 | 0% | 25,000 | 120 | 300만 | 156만 | 52.0% |
| 20,000 | 0% | 20,000 | 175 | 350만 | 140만 | 40.0% |
| 25,000 | 20% | 20,000 | 210 | 420만 | 168만 | 40.0% |
| 15,000 | 30% | 10,500 | 723 | 760만 | -108만 | -14.3% |

> 핵심 교훈: 가격을 너무 낮추거나 할인을 과도하게 하면 **판매량은 급증하지만 적자** 발생!

---

## 2. 헤더 총합 계산

```javascript
총매출 = Σ(각 상품의 매출)
총이익 = Σ(각 상품의 이익)
총판매 = Σ(각 상품의 예상판매)
이익률 = 총매출 > 0 ? (총이익/총매출) × 100 : 0
```

---

## 3. 분석 탭 — 기본값 대비 변화율

```javascript
// 기본값 (슬라이더 조절 전)
기본매출 = Σ(기본가 × 기본판매)
기본이익 = Σ((기본가 - 원가) × 기본판매)
기본판매합 = Σ(기본판매)

// 변화율
매출변화 = (현재매출 - 기본매출) / 기본매출 × 100
이익변화 = (현재이익 - 기본이익) / 기본이익 × 100
판매변화 = (현재판매 - 기본판매합) / 기본판매합 × 100
```

### 가격 변경 효과 카드
- 가장 많이 변경된 상품 자동 선택
- 변경 기준: `|현재가-기본가| + 할인율`

---

## 4. AI 전략 점수 시스템

### 3개 하위 점수 (각 0~100)

#### 가격 전략 점수
```javascript
let priceScore = 50; // 기본

각 상품에 대해:
  가격차이 = |현재가 - 기본가| / 기본가
  if (차이 < 10%) priceScore += 12  // 안정적
  else if (차이 < 30%) priceScore += 5
  else priceScore -= 5  // 극단적 변경

  if (할인 > 0 && 할인 <= 20%) priceScore += 5  // 적절한 할인
  else if (할인 > 30%) priceScore -= 5  // 과도한 할인

범위 제한: 0 ~ 100
```

#### 수익성 점수
```javascript
let profitScore = 50;

if (이익률 >= 35%) profitScore += 30
else if (이익률 >= 25%) profitScore += 20
else if (이익률 >= 15%) profitScore += 5
else profitScore -= 15

if (총이익 > 0) profitScore += 10
else profitScore -= 20

적자 상품 1개당: profitScore -= 15

범위 제한: 0 ~ 100
```

#### 판매 전략 점수
```javascript
let salesScore = 50;

판매성장률 = (현재판매 - 기본판매) / 기본판매
if (성장률 > 30%) salesScore += 25
else if (성장률 > 10%) salesScore += 15
else if (성장률 > 0%) salesScore += 5

범위 제한: 0 ~ 100
```

### 종합 점수 & 등급
```javascript
종합 = Math.round((가격전략 + 수익성 + 판매전략) / 3)

등급:
  85~100: 🏆 경영 천재!
  70~84:  💎 유능한 CEO
  55~69:  📈 성장 중
  40~54:  🌱 배우는 중
  0~39:   ⭐ 초보 창업자
```

---

## 5. AI 분석 텍스트 생성 로직

```javascript
// 1. 매출 비중 분석 (항상 표시)
"📌 {최고매출 상품명}이(가) 매출의 {비중}%를 차지해요 (월 {금액}만원)."

// 2. 적자 경고 (적자 상품 있을 때)
"🚨 {상품명}이(가) 적자! 가격 인상 또는 할인 축소 필요."

// 3. 할인 분석
if (평균할인 > 20%)
  "⚠️ 평균 할인율 {n}%는 높은 편. 고객이 정가에 안 살 수 있어요."
else if (평균할인 === 0%)
  "💡 할인을 아직 안 쓰고 있네요. 적절한 할인은 판매량을 늘릴 수 있어요!"

// 4. 이익률 평가
if (이익률 >= 35%)
  "✅ 이익률 {n}% — 훌륭해요!"
else if (이익률 >= 20%)
  "📊 이익률 {n}% — 괜찮지만 개선 여지 있어요."
else
  "⚠️ 이익률 {n}% — 수익성이 낮아요."
```

---

## 6. 인터랙션 흐름

```
사용자가 슬라이더 조절
  ↓
해당 상품 카드의 결과 칩 업데이트
  ↓
헤더 총합 (매출/이익/이익률/판매) 업데이트
  ↓
탭 전환 시:
  분석 탭 → KPI + 차트 + 효과 카드 다시 렌더
  AI 탭 → 점수 재계산 + 분석 텍스트 재생성
```

---

## 7. 초기화

```javascript
초기화 버튼 클릭 시:
  모든 상품의 price = basePrice
  모든 상품의 discount = 0
  전체 화면 다시 렌더링
```
